= Adding A New Submodule To A Repository
:description: Describes how to add a new submodule in a repository.
:keywords: git,gitlab,submodule,add

include::compendium:partial$_attributes.adoc[]

TIP: If you have https://tortoisegit.org/[TortoiseGit^] installed, you can also do this through the TortoiseGit UI.
See the https://tortoisegit.org/docs/tortoisegit/tgit-dug-submodules.html[TortoiseGit Tutorial on Submodules^] for more information.

To add a submodule to a repository, follow these steps.

. Open a {powershell} window in your repositories root folder
. Enter the following command for adding the other repository as a submodule (replace url as needed):
+
[source,git]
----
git submodule add git@code.asam.net:common/style-resources.git // <1>
----

+
. Edit .gitmodule with any text editor (e.g. {vscode}) to change the remote url to the local path:
+
[source,git]
----
// Before editing
[submodule "asciidoc-resources"]
        path = asciidoc-resources
        url = git@code.asam.net:common/style-resources.git // <1>

########

// After editing
[submodule "asciidoc-resources"]
        path = asciidoc-resources
        url = ../../common/asciidoc-resources.git // <2>

----

+
. Stage/add your changed .gitmodules in git:

+
[source,git]
----
git add .gitmodules
----

+
. After that, `git commit` & `git push`.

<1> absolute path to repo
<2> relative path to repo, when parent repo is also on https://code.asam.net[window=_blank].
Note that this has so represent the internal repository structure of code.asam.net.


[NOTE]
====
When setting up a repository NOT on code.asam.net (e.g. Github for OSI)::
. Use the https adress of the repository.
`+git submodule add https://code.asam.net/common/style-resources.git+`

. Do **NOT** edit .gitmodule for relative pathing!
====



== Removing A Submodule From A Repository

To delete a submodule do:

[source,console]
----
> git rm .gitmodules // <1>
> git rm asciidoc-resources
----
* After that `> git commit` & `> git push`.

<1> This deletes all submodules in a repository.
If there is another submodule that should be kept, just delete the corresponding lines from the `.gitmodules` instead.

related::submodule[]
